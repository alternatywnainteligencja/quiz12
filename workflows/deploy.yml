# ğŸ§± Nazwa workflowa â€“ pojawi siÄ™ w zakÅ‚adce â€Actionsâ€ w Twoim repozytorium
name: Deploy Vite app to GitHub Pages

# ğŸš€ OkreÅ›lamy, kiedy uruchamiaÄ‡ ten workflow:
# tutaj: przy kaÅ¼dym pushu do gaÅ‚Ä™zi â€mainâ€
on:
  push:
    branches:
      - main

# ğŸ’¼ KaÅ¼dy workflow skÅ‚ada siÄ™ z jednego lub wielu "jobs" (zadaÅ„)
jobs:
  build:
    # ğŸ”§ Workflow uruchamia siÄ™ na najnowszym Ubuntu (czyli serwerze z Linuxem)
    runs-on: ubuntu-latest

    # ğŸ“‹ Lista krokÃ³w, ktÃ³re GitHub wykona po kolei
    steps:
      # 1ï¸âƒ£ Pobierz kod ÅºrÃ³dÅ‚owy repozytorium z GitHuba
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2ï¸âƒ£ Zainstaluj Node.js (Å›rodowisko do uruchamiania Vite i Reacta)
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20   # uÅ¼yj Node 20 â€“ stabilna wersja zgodna z Vite

      # 3ï¸âƒ£ Zainstaluj wszystkie zaleÅ¼noÅ›ci z package.json
      - name: Install dependencies
        run: npm ci           # â€npm ciâ€ jest szybsze i bardziej przewidywalne niÅ¼ â€npm installâ€

      # 4ï¸âƒ£ Zbuduj projekt (Vite utworzy folder â€distâ€)
      - name: Build project
        run: npm run build

      # 5ï¸âƒ£ Opublikuj folder â€distâ€ jako stronÄ™ GitHub Pages
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3   # popularna i sprawdzona akcja do publikowania
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}   # automatyczny token z uprawnieniami do repozytorium
          publish_dir: ./dist                         # katalog, ktÃ³ry ma zostaÄ‡ opublikowany (czyli wynik budowy Vite)
